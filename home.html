<!doctype html>
<html lang="en">
<head>
    <title>TRX BlockChain Explorer</title>
    <meta charset="utf-8" />
    <meta name="Description" content="TRX BlockChain Explorer." />
    <meta name="format-detection" content="telephone=no" />
    <link rel="shortcut icon" href="images/favicon.ico" />
    <link rel="stylesheet" href="assets/css/profile.css">
    <link rel="stylesheet" href="assets/plugins/scrollbar/perfect-scrollbar.css">
    <link rel="stylesheet" href="assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="assets/css/style-mod.css" />
    <link rel="stylesheet" href="assets/css/custom-head-foot-scroll-blue.css" />
    <link rel="stylesheet" href="assets/plugins/line-icons/line-icons.css" />
    <link rel="stylesheet" href="assets/plugins/font-awesome/css/font-awesome.min.css" />
    <link rel="Stylesheet" href="assets/css/jquery-ui.min.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="assets/css/loading.css">
    <style>
    @media (max-width: 480px) {
        .hidden-su-xs {
            display: none !important;
        }
    }
    @media (min-width: 481px) {
        .visible-su-xs {
            display: none;
        }
    }
    </style>
</head>
<body>
    <div class="wrapper">
        <!-- 头部 -->
        <div class="header">
            <div class="container">
                <a class="logo" href="/" target="_parent" title="Home Page">
                    <img id="logo-header" src="images/logo.png" alt="Logo" style="margin-top: 16px; margin-bottom: 14px; margin-left: -6px">
                </a>
                <div class="topbar hidden-xs hidden-sm ">
                    <ul class="loginbar pull-right">
                        <li>
                            <div style="display: inline;">
                                <input id="txtSearchInput" type="text" class="form-control-custom" placeholder="Address / TxHash / Block Number / Token Name" name="search" maxlength="66" style="width: 330px; height: 31px;outline: none;">
                                <span class="" style="display: inline">
                                    <button class="btn-u" id="searchBtn" type="button" style="padding: 2px 6px 3px; height: 31px; width: 41px; margin-left: -5px; margin-top: 3px;">GO</button>
                                </span>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="collapse navbar-collapse mega-menu navbar-responsive-collapse">
                <div class="container">
                    <ul class="nav navbar-nav">
                        <li id="LI_default" class="active">
                            <a href="home.html">HOME</a>
                        </li>
                        <li id="LI_block">
                            <a href="blocks.html?number=">BLOCKS</a>
                        </li>
                        <li id="LI_accounts">
                            <a href="accounts.html?balance=">ACCOUNTS</a>
                        </li>
                        <li id="LI_transactions">
                            <a href="transactions.html?hash=">TRANSACTIONS</a>
                        </li>
                        <li id="LI_nodes">
                            <a href="nodes.html">NODES</a>
                        </li>
                        <li id="LI_representatives">
                            <a href="representatives.html">REPRESENTATIVES</a>
                        </li>
                        <li id="LI_tokens">
                            <a href="tokens.html?name=">TOKENS</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <!-- 头部结束 -->
        <!-- 内容开始 -->
        <div class="profile container " style="margin-top: 0px">
            <div class="row">
                <div>
                    <div class="profile-body">
                        <!-- 上部分 -->
                        <div id="ContentPlaceHolder1_mainboxes" class="row margin-bottom-10">
                            <div class="col-sm-6 sm-margin-bottom-20" id="serviceBlock">
                                <div class="service-block-v3 service-block-blue" style="padding: 30px 20px 20px;">
                                    <i class="icon-globe" style="margin-right:16px"></i>
                                    <span class="service-heading" rel='tooltip' data-placement='right'>
                                        <a href="javascript:;">
                                            <font size=2 color='white'>MARKET CAP OF $<span id="marketCap"></span>
                                            </font>
                                        </a>
                                    </span>
                                    <h4 style="margin-top:2px">
                                        <font color='white'>
                                            <font color='white'>$<span id="priceUsd"></span>
                                                <!-- <font color='brown' size='2' rel='tooltip' data-placement='bottom' title='USD/Eth change'> (<span id="percent_change_24h"></span>)</font> -->
                                            </font>
                                        </font>
                                    </h4>
                                    <div class="clearfix margin-bottom-5 "></div>
                                    <div class="row margin-bottom-20" style="margin-top: 20px;margin-bottom: 0;">
                                        <div class="col-xs-6 service-in">
                                            <small>
                                                <a href="blocks.html" rel='tooltip' data-placement='right' title="View List of Blocks">
                                                    <font color="white">Last Block</font>
                                                </a>
                                            </small>
                                            <h4 style="color: #FFFFFF">
                                                <span id="ContentPlaceHolder1_Label1" style="font-size:Larger;">
                                                    <!-- <a href="blocks" rel='tooltip' data-placement='bottom' title="The latest block no">
                                                        <font color="white">5688989</font>
                                                    </a> -->
                                                </span>
                                                <span class='hidden-xs' rel='tooltip' data-placement='right' title='Avg Block Time of the latest 5000 blocks'>
                                                    <font size=2> (<span id="timestamp"></span>)</font>
                                                </span>
                                            </h4>
                                        </div>
                                        <div class="col-xs-6 text-right service-in">
                                            <small>
                                                <a href="transactions.html" rel='tooltip' data-placement='left' title="View List of Transactions">
                                                    <font color="white">
                                                        <span class="hidden-su-xs">Transactions</span>
                                                        <span class="visible-su-xs">TXNS</span>
                                                    </font>
                                                </a>
                                            </small>
                                            <h4 id="transactionsInfo">
                                                <!-- <a href='transactions.html' rel='tooltip' data-placement='left' title='Total Txns counter<br>(updated every 5 mins)'>
                                                    <font color='white'><span id="total"></span></font>
                                                </a> -->
                                            </h4>
                                        </div>
                                    </div>
                                    <div class="statistics" style="visibility: hidden;margin-top: -10px;">
                                        <h3 class="heading-xs">
                                    <a href="/chart/hashrate" rel='tooltip' data-placement='right' title="View HashRate Chart">
                                        <font color="white">Hash Rate</font>
                                    </a>
                                    <a href="/chart/difficulty" class="pull-right" rel='tooltip' data-placement='left' title="View Difficulty Growth Chart">
                                        <font color="white">Network Difficulty</font>
                                    </a>
                                </h3>
                                        <font color="white">
                                            <span rel='tooltip' data-placement='bottom' title='Avg Hash Rate of the last 12 Hours'>266,603.90 GH/s</span>&nbsp;
                                        </font>
                                        <span class="pull-right" rel='tooltip' data-placement='bottom' title="Average Difficulty">
                                    <font color=white>3,195.72 TH</font>
                                </span>
                                    </div>
                                </div>
                            </div>
                            <!-- left end -->
                            <!-- right -->
                            <div class="col-sm-6">
                                <div class="tag-box tag-box-v2 box-shadow shadow-effect-1" style="border-right-color: #cc2a1d; border-right-style: solid; border-right-width: 2px; margin-bottom: 0px; background-color: #FFFFFF;">
                                    <div id="containerchart" style="min-width: 255px; height: 180px; margin: 0 auto">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- 上部分结束 -->
                        <!-- List -->
                        <div class="row margin-bottom-40" id="centent">
                            <!-- Left -->
                            <div class="col-sm-6 sm-margin-bottom-20">
                                <div class="panel panel-profile no-bg">
                                    <div class="panel-heading overflow-h">
                                        <h2 class="panel-title heading-sm pull-left">
                                            <i class="fa fa-cubes"></i>Blocks
                                        </h2>
                                        <a href="blocks.html?number=" class="btn-u btn-brd btn-brd-hover btn-u-dark btn-u-xs pull-right">View All</a>
                                    </div>
                                    <div id="scrollbar2" class="panel-body no-padding mCustomScrollbar" data-mcs-theme="minimal-dark" style="height: 580px">
                                        <!--  -->
                                    </div>
                                </div>
                            </div>
                            <!-- Left End -->
                            <!-- Right -->
                            <div class="col-sm-6">
                                <div class="panel panel-profile no-bg">
                                    <div class="panel-heading overflow-h">
                                        <h2 class="panel-title heading-sm pull-left"><i class="fa fa-list-alt "></i>Transactions</h2>
                                        <span style="color: #999999; font-size: 11px; margin-bottom: -20px; padding-bottom: 0px;"></span>
                                        <a href="transactions.html?hash=" class="btn-u btn-brd btn-brd-hover btn-u-dark btn-u-xs pull-right">View All</a>
                                    </div>
                                    <div id="scrollbar" class="panel-body no-padding mCustomScrollbar" data-mcs-theme="minimal-dark" style="height: 580px">

                                        <!-- <div class="profile-post color-one">
                                            <span class="profile-post-numb">
                                                <i class="fa fa-hdd-o"></i>
                                            </span>
                                            <div class="profile-post-in">
                                                <h3 class="heading-xs">TX# 
                                                    <a href="/tx/" class='hash-tag-frontpage' title="Transaction Hash">
                                                        <font color='#cc2a1d'>aaaa</font>
                                                    </a>
                                                    <span class="pull-right" style="font-size: small">&gt; 33 secs ago &nbsp;</span>
                                                </h3>
                                                <p>
                                                    From
                                                    <a href='/' class='address-tag'>0x9a81a3dd24c5c6f95739391e3e0d13ebe17650db</a> 
                                                        To
                                                    <a href='/' class='address-tag'>0x4b10e3e0fffaab594b8e93ec8476eb45b222656d</a>
                                                </p>
                                                <p>Amount 2 Ether</p>
                                            </div>
                                        </div> -->

                                    </div>
                                </div>
                            </div>
                            <!-- Right End -->
                        </div>
                        <!-- List End -->
                    </div>
                </div>
            </div>
        </div>
        <!-- Content End -->
    </div>
    <script type="text/javascript" src="assets/js/jquery.js"></script>
    <script type="text/javascript" src="assets/js/loading.js"></script>
    <script type="text/javascript" src="assets/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="assets/js/highcharts.js"></script>
    <script type="text/javascript" src="assets/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="assets/js/combine-js-bottom.js"></script>
    <script type="text/javascript" src="assets/js/search.js"></script>
    <script type="text/javascript">
    var Home = {
        init: function() {
            this.SearchInfo()
            this.ServiceInfor();
            this.Charts();
            this.AddEvent();
        },
        SearchInfo:function(){
            $('#searchBtn').click(function(){
                var txt = $('#txtSearchInput').val();
                test.search(txt);
            })
        },
        Charts:function(){
            var load = new Loading();
            load.init({
                target: '#containerchart'
            });
            load.start();
            $.ajax({
                url: 'https://min-api.cryptocompare.com/data/histoday?fsym=TRX&tsym=USD&limit=13',
                type: 'GET',
                data: {},
                dataType: 'JSON',
                success: function(res) {
                    load.stop();
                    var data = res.Data;
                    var arr = [],categories = [];
                    for(var i=0;i<data.length;i++){
                        arr.push({
                            y: data[i].close, 
                            dt: Home.TimestampMonthDay(data[i].time),
                            fillColor:'#cc2a1d'
                        });
                        categories.push(Home.TimestampMonthDay(data[i].time));
                    }
                    // console.log(arr)
                    $('#containerchart').highcharts({
                        chart: {
                            type: 'line',
                            spacingBottom: 0,
                            spacingTop: 0,
                            spacingLeft: 0,
                            spacingRight: 0,
                        },
                        legend: {
                            enabled: false
                        },
                        exporting: {
                            enabled: false
                        },
                        credits: {
                            enabled: false
                        },
                        title: {
                            text: '14 day TRX Price History',
                            style: {
                                fontSize: '13px'
                            }
                        },
                        xAxis: {
                            title: { text: '' },
                            categories: categories,
                            plotLines:[
                                {
                                    // color:'red'
                                }
                            ]
                        },
                        yAxis: {
                            labels: {
                                enabled: true
                            },
                            title: {
                                text: null
                            }
                        },
                        tooltip: {
                            formatter: function() {
                                return '<table><tr><td style="padding:0">' +
                                    '<span style="color:' + this.series.color + '">Price: </a></span><b>' + this.point.y + '</b><br>'
                                '</td></tr></table>';
                            }
                        },
                        plotOptions: {
                            series: {
                                color:'#cc2a1d',
                                animation: {
                                    duration: 0
                                },
                                point: {
                                    events: {
                                        select: function(e) {
                                            // location.href = 'txs?dt=' + this.options.dt;
                                        }
                                    }
                                }
                            },
                            column: {
                                pointPadding: 0.1,
                                borderWidth: 0
                            }
                        },
                        series: [{
                            name: 'Transactions',
                            data: arr,
                            allowPointSelect: true,
                            marker: {
                                fillColor: '#cc2a1d'
                                // lineWidth: 2,
                                // lineColor: '#cc2a1d'
                            }
                        }, ]
                    });


                }
            })
        },
        AddEvent: function() {
            var load = new Loading();
            load.init({
                target: '#centent'
            });
            load.start();
            // Block
            $.ajax({
                url: 'https://api.tronscan.org/api/block?limit=10&sort=-number',
                type: 'GET',
                data: {},
                dataType: 'JSON',
                success: function(res) {
                    var data = res.data,
                        len = data.length,
                        str = '';
                    for (var i = 0; i < len; i++) {
                        var timesP = Home.TimestampPassed(data[i].timestamp);
                        str += '<div class="profile-event">' +
                            '<div class="date-formats" style="width: 135px; height: 65px; margin-top:2px">' +
                            '<span>' +
                            '<a href="blocks.html?number=' + data[i].number + '"><font size="2" color="white">Block ' + data[i].number + '</font></a>' +
                            '</span>' +
                            '<small>&gt; ' + timesP + ' </small>' +
                            '</div>' +
                            '<div class="overflow-h">' +
                            'Mined By ' +
                            '<a href="accounts.html?balance='+data[i].witnessAddress+'" class="address-tag" style="width:75%;"> ' + data[i].witnessAddress + '</a>' +
                            '<p>' +
                            // '<a href="javascript:;" title="Transactions in this Block">' +
                            '<b>' + data[i].nrOfTrx + ' txns</b>' +
                            // '</a>' +
                            '</p>' +
                            '<p> Block Reward 32 trx</p>' +
                            '</div>' +
                            '</div>'

                    }
                    $('#mCSB_1_container').append(str);
                }
            })
            //Transaction
            $.ajax({
                url: 'https://api.tronscan.org/api/transaction?limit=10&sort=-timestamp',
                type: 'GET',
                data: {},
                dataType: 'JSON',
                success: function(res) {
                    load.stop();
                    var data = res.data,
                        len = data.length,
                        str = '',fromTo = '';
                    for (var i = 0; i < len; i++) {
                        var timesP = Home.TimestampPassed(data[i].timestamp);
                        if(data[i].contractData.from){
                            fromTo = '<p>From '+
                                    '<a href="accounts.html?balance='+data[i].contractData.from+'" class="address-tag">'+data[i].contractData.from+'</a>To ' +
                                    '<a href="accounts.html?balance='+data[i].contractData.to+'" class="address-tag">'+data[i].contractData.to+'</a>'+
                                    '</p>'+
                                    '<p>Amount '+data[i].contractData.amount+' Trx</p>'
                        }
                        str += '<div class="profile-post color-one">'+
                                '<span class="profile-post-numb">'+
                                    '<i class="fa fa-hdd-o"></i>'+
                                '</span>'+
                                '<div class="profile-post-in">'+
                                    '<h3 class="heading-xs">TX# '+
                                        '<a href="transactions.html?hash='+data[i].hash+'" class="hash-tag-frontpage" title="Transaction Hash">'+
                                            '<font color="#cc2a1d">'+data[i].hash+'</font>'+
                                        '</a>'+
                                        '<span class="pull-right" style="font-size: small">&gt; '+timesP+' &nbsp;</span>'+
                                    '</h3>'+fromTo+
                                '</div>'+
                            '</div>'

                    }
                    $('#mCSB_2_container').append(str);
                }
            })
        },
        ServiceInfor: function() {
            var load = new Loading();
            load.init({
                target: '#serviceBlock'
            });
            load.start();
            $.ajax({
                url:'https://api.tronscan.org/api/market/markets',
                type:'GET',
                data:{},
                dataType:'JSON',
                success:function(res){
                    var data = res[0];
                    // console.log(data)
                    $('#priceUsd').html(data.price);                 
                    $('#marketCap').html(data.price*100000000000);                 
                }
            })
            $.ajax({
                url: 'https://api.tronscan.org/api/block?limit=1&sort=-number',
                type: 'GET',
                data: {},
                dataType: 'JSON',
                success: function(res) {
                    var data = res.data;
                    var timestamp = Home.TimestampPassed(data[0].timestamp)
                    var str = '<a href="blocks.html?number=' + data[0].number + '" rel="tooltip" data-placement="bottom" title="The latest block no">' +
                        '<font color="white">' + data[0].number + '</font>' +
                        '</a>'
                    $('#ContentPlaceHolder1_Label1').html(str);
                    $('#timestamp').html(timestamp)
                }
            })
            $.ajax({
                url: 'https://api.tronscan.org/api/transaction?count',
                type: 'GET',
                data: {},
                dataType: 'JSON',
                success: function(res) {
                    load.stop();
                    var str = 
                    // "<a href='javascript:;' rel='tooltip' data-placement='left'>"+
                            "<font color='white'><span id='total'>"+res.total+"</span></font>"
                        // "</a>"
                    $('#transactionsInfo').html(str)
                }
            })

        },
        TimestampMonthDay:function(timestamp){
            var date = new  Date(timestamp * 1000);
            return (date.getMonth() + 1) + '/' + date.getDate();
        },
        TimestampPassed:function(timestamp)
        {

            var currentTimestamp = Date.parse(new Date());
            var tsDiff = (currentTimestamp - timestamp) / 1000;
            if ( tsDiff < 60 )
            {
                return Math.floor(tsDiff) + ' secs ago';
            }
            tsDiff = tsDiff / 60;
            if ( tsDiff < 60 )
            {
                return Math.floor(tsDiff) + ' mins ago';
            }
            tsDiff = tsDiff / 60;
            if ( tsDiff < 24 )
            {
                return Math.floor(tsDiff) + ' hrs ago';
            }
            tsDiff = tsDiff / 24;
            return Math.floor(tsDiff) + ' days ago';
        }
    }

    $(document).ready(function() {
        Home.init();
    })
    </script>
</body>

</html>